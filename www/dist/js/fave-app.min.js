app.directive("swipeMeals",["$timeout",function($timeout){"use strict";return{restrict:"E",templateUrl:"src/templates/meal.html",replace:!0,controller:function($scope){$scope.meals=[{title:"Tom Ka Gai",description:"Thai Chicken Soup (Tom Ka Gai) has that distinctive Thai flavor - a balance of spicy, salty, sweet and sour. ",restaurant:"ASIO Thai",price:11,faves:21,images:["img/chicken.jpg"]},{title:"Test",description:"Hall√∏j!",restaurant:"ASIO Thai",price:11,faves:21,images:["img/chicken.jpg"]}]},link:function($scope,$element){$timeout(function(){var swipeElement=Swipe($element[0],{disableScroll:!0,callback:function(){},transitionEnd:function(){}});$scope.prev=swipeElement.prev,$scope.next=swipeElement.next},0)}}}]);var app=angular.module("faveapp",["ngTouch","ngAnimate","safeApply","firebase","ngRoute"]);app.config(["$routeProvider",function($routeProvider){"use strict";$routeProvider.when("/home",{templateUrl:"src/templates/home.html",controller:"adminController"}).when("/admin",{templateUrl:"src/templates/admin.html",controller:"adminController"}).otherwise({redirectTo:"/home"})}]);var phonegap={initialize:function(){"use strict";this.bindEvents()},bindEvents:function(){"use strict";navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?document.addEventListener("deviceready",this.bootstrapAngular.bind(this),!1):this.bootstrapAngular()},loadJS:function(src,callback){"use strict";var s=document.createElement("script");s.src=src,s.async=!0,s.onreadystatechange=s.onload=function(){var state=s.readyState;callback.done||state&&!/loaded|complete/.test(state)||(callback.done=!0,callback())},document.getElementsByTagName("head")[0].appendChild(s)},bootstrapAngular:function(){"use strict";this.loadJS("src/js/vendors/angular.min.js",function(){angular.element(document).ready(function(){angular.bootstrap(document,["faveapp"])})})}};phonegap.initialize(),app.controller("adminController",["$scope","facebook","safeApply",function(){"use strict"}]),app.controller("mainController",["$scope","facebook","safeApply",function($scope,facebook,safeApply){"use strict";facebook.userReady.then(function(){FB.api("/me",function(activeUser){safeApply($scope,function(){$scope.activeUser=activeUser})})}),$scope.login=function(){facebook.sdkReady.then(function(){FB.login(null,{scope:"email"})})},$scope.me=function(){facebook.sdkReady.then(function(){FB.api("/me",function(response){alert("Hej "+response.name)})})}}]),app.factory("facebook",["$q",function($q){"use strict";var appId="627802337276971",loadJS=function(src,callback){var s=document.createElement("script");s.src=src,s.async=!0,s.onreadystatechange=s.onload=function(){var state=s.readyState;!callback||callback.done||state&&!/loaded|complete/.test(state)||(callback.done=!0,callback())},document.getElementsByTagName("head")[0].appendChild(s)},sdkReadyDef=$q.defer();window.fbAsyncInit=function(){sdkReadyDef.resolve()};var sdkReady=sdkReadyDef.promise,userReadyDef=$q.defer();sdkReady.then(function(){FB.Event.subscribe("auth.authResponseChange",function(response){"connected"===response.status&&userReadyDef.resolve()})});var userReady=userReadyDef.promise,devices={phone:{loadSDK:function(){loadJS("src/js/vendors/facebook-sdk-phone.js")},init:function(){sdkReady.then(function(){FB.init({appId:appId,nativeInterface:CDV.FB,useCachedDialogs:!1})})}},web:{loadSDK:function(){loadJS("src/js/vendors/facebook-sdk-web.js")},init:function(){sdkReady.then(function(){FB.init({appId:appId})})}}},device=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)?devices.phone:devices.web;return device.loadSDK(),device.init(),{userReady:userReady,sdkReady:sdkReady}}]),app.factory("firebaseAuth",["$q","safeApply",function($q){"use strict";var userReadyDef=$q.defer(),usersRef=new Firebase("https://fave.firebaseio.com/users"),login=(new FirebaseSimpleLogin(usersRef,onAuthenticationChange.bind(this)),function(accessToken){return this.auth.login("facebook",{access_token:accessToken}),userReadyDef.promise}),onAuthenticationChange=function(error,facebookUser){facebookUser&&this.createCurrentUser(facebookUser).then(function(){userReadyDef.resolve()})};return login}]),angular.module("safeApply",[]).factory("safeApply",[function(){"use strict";return function($scope,fn){var phase=$scope.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()}}]);