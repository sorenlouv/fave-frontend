var app=angular.module("faveapp",["ngTouch","ngAnimate"]),phonegap={initialize:function(){"use strict";this.bindEvents()},bindEvents:function(){"use strict";navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?document.addEventListener("deviceready",this.bootstrapAngular.bind(this),!1):this.bootstrapAngular()},loadJS:function(src,callback){"use strict";var s=document.createElement("script");s.src=src,s.async=!0,s.onreadystatechange=s.onload=function(){var state=s.readyState;callback.done||state&&!/loaded|complete/.test(state)||(callback.done=!0,callback())},document.getElementsByTagName("head")[0].appendChild(s)},bootstrapAngular:function(){"use strict";this.loadJS("src/js/vendors/angular.min.js",function(){angular.element(document).ready(function(){angular.bootstrap(document,["faveapp"])})})}};phonegap.initialize(),app.controller("mainController",["$scope","facebook",function($scope,facebook){"use strict";$scope.login=function(){facebook.then(function(){FB.login(function(response){"connected"===response.status&&(console.log("Logged in"),auth.login("facebook",{access_token:response.authResponse.accessToken}))},{scope:"email"})})},$scope.me=function(){facebook.then(function(){FB.api("/me",function(response){alert("Hej "+response.name)})})};var onAuthenticationChange=function(error,facebookUser){error?console.log("Authentication error",error):facebookUser&&console.log("User signed in!")},usersRef=new Firebase("https://fave.firebaseio.com/users"),auth=new FirebaseSimpleLogin(usersRef,onAuthenticationChange)}]),app.factory("facebook",["$q",function($q){"use strict";var deferred=$q.defer(),appId="627802337276971",loadJS=function(src,callback){var s=document.createElement("script");s.src=src,s.async=!0,s.onreadystatechange=s.onload=function(){var state=s.readyState;!callback||callback.done||state&&!/loaded|complete/.test(state)||(callback.done=!0,callback())},document.getElementsByTagName("head")[0].appendChild(s)},devices={phone:{init:function(){window.fbAsyncInit=function(){FB.init({appId:appId,nativeInterface:CDV.FB,useCachedDialogs:!1}),deferred.resolve()},loadJS("src/js/vendors/facebook-sdk-phone.js")}},web:{init:function(){window.fbAsyncInit=function(){FB.init({appId:appId}),deferred.resolve()},loadJS("src/js/vendors/facebook-sdk-web.js")}}},device=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)?devices.phone:devices.web;return device.init(),deferred.promise}]),angular.module("safeApply",[]).factory("safeApply",[function(){"use strict";return function($scope,fn){var phase=$scope.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()}}]);